<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh" xml:lang="zh">
<!--[if lt IE 8]>  <html class="no-js lt-ie10 lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>     <html class="no-js lt-ie10 lt-ie9"> <![endif]-->
<!--[if gt IE 8]>  <html class="no-js lt-ie10"> <![endif]-->
<!--[if lt IE9]><script src="http://zhu8.qiniudn.com/assets/assets/js/html5.js"></script><![endif]-->
<head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
	<!--[if IE 8 ]><meta http-equiv="X-UA-Compatible" content="IE=7"><![endif]-->
    <title>从wordpress到textpattern | 陈俊的网：浮生志</title>
</head>
<body>
    
    <meta content="Jekyll" name="generator">
    <meta content="Chen Jun(Zhu8)" name="author">
    <meta content="Mfl8lf6NN0DWPluv8lQpBL-mrKi22ZOcnlKXYURni1Y" name="google-site-verification">
    <meta content="EfohsDsVrB" name="baidu-site-verification">
    <link href="http://feeds.feedburner.com/Zhu8/" rel="alternate" title=" Feed" type="application/atom+xml">
    <link href="/atom.xml" rel="alternate" title=" ATOM Feed" type="application/atom+xml">
    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link href="https://plus.google.com/+ChenJun" rel="author">
    <link href="http://zhu8.qiniudn.com/assets/css/bootstrap.min.css" rel="stylesheet">
	<!--link rel="stylesheet" href="//cdn.jsdelivr.net/bootflat/2.0.0/css/bootflat.css" /-->
    <link href="http://zhu8.qiniudn.com/assets/css/bootstrap.min.2.css" rel="stylesheet">
	<!--link rel="stylesheet" href="http://zhu8.qiniudn.com/assets/css/ihover.min.css"-->
    <link href="http://zhu8.qiniudn.com/assets/css/pygment_trac.css" rel="stylesheet">
    <link href="http://zhu8.qiniudn.com/assets/fancyBox/jquery.fancybox.css" rel="stylesheet">
    <link href="http://zhu8.qiniudn.com/assets/css/style.css" rel="stylesheet">
    <meta content="width=device-width, initial-scale=1, user-scalable=no" name="viewport">
    <div class="wrapper">
        <header class="main">
            <hgroup>
                <h1 id="logo"><a href="/">陈俊的网：浮生志</a></h1>
				<p id="tagline">On The Way to Philistinism...</p>
            </hgroup>
            <ul class="buttons">
                <li class="twitter">
                    <a href="http://twitter.com//" rel="me">Follow <strong>Twitter</strong></a>
                </li>
                <li class="facebook">
                    <a href="http://www.facebook.com//" rel="me">Connect <strong>Facebook</strong></a>
                </li>
                <li class="google">
                    <a href="https://plus.google.com//" rel="publisher">Plus<strong>Google+</strong></a>
                </li>
            </ul>
        </header>
        <section class="main" id="container">
            <!--^frag--><article class="post">
	<header>
    <!-- Nav tabs -->
<ul class="nav nav-pills nav-justifiedx">
    <li class=""><a href="/">Home | 首页</a></li>
	<li class="active"><a href="/blog/">Weblog | 网志</a></li>
	<li class=""><a href="/about.html">About | 关于</a></li>
    <li class=""><a href="/archive.html">Archive | 归档</a></li>
</ul>
<div id="page-navigation"> 
        <div class="clear">&nbsp;</div> 
        <div class="left"> 
         
                <a href="/blog/2008/04/wang-xiao-bo-11-years.html" title="Previous Post: 小波十一年">&laquo;&laquo; 上一篇日志</a> 
         
        </div> 

        <div class="right"> 
         
                <a href="/blog/2008/05/back-to-movabletype.html" title="Next Post: 又换回MovableType">下一篇日志 &raquo;&raquo;</a> 
         
        </div> 
        <div class="clear">&nbsp;</div> 
</div>
	<div class="page-header">
		  <h1>从wordpress到textpattern</h1>
    </div>
		<p><b>发布于：</b> <time datetime="2008-04-16T14:29:04+00:00" pubdate>
			2008年4月16日 14时29分04秒</time>
      <a href="https://plus.google.com/+ChenJun?rel=author">Chen Jun(Zhu8)</a>
    </p>
	</header>

	<p>其实<img class="right" title="Textpattern" style="FLOAT: right" alt="Textpattern" src="http://static.chenjun.com/images/txp.gif" width="250px" />很久以前就试用了 <a href="http://textpattern.com/"><span class="caps">TXP</span></a> ，但是一直是一头雾水，今天终于 <sup>其实昨天</sup> 就已经弄好了。不过一直wordpress导入有点小问题，所以一直没有换过来。现在折腾好了，做一下小 <strong>记录：</strong></p>

<ul>
<li><strong>解决乱码问题</strong></li>
</ul>

<p>打开 <em>import_wp.php</em> ，找到下面这行：</p>

<p><code>mysql_select_db($b2db, $b2link);</code></p>

<p>在后面加上：</p>

<p><code>mysql_query(&quot;SET NAMES &#39;utf8&#39;&quot;, $b2link);</code></p>

<ul>
<li><strong>增加 Excerpt 部分</strong></li>
</ul>

<p>找到下面这行：</p>

<p><code>p.post_content as Body,</code></p>

<p>在后面加上：</p>

<p><code>p.post_excerpt as Excerpt,</code></p>

<p>同样的，找到这行：</p>

<p><code>Body_html = &#39;&quot;.doSlash($Body_html).&quot;&#39;,</code></p>

<p>在后面加上：</p>
<div class="highlight"><pre><code class="language-php" data-lang="php">Excerpt = '".doSlash($Excerpt)."',
Excerpt_html = '".doSlash($Excerpt)."',
</code></pre></div>
<ul>
<li><strong>不导入附件生成的页面</strong></li>
</ul>

<p>找到下面这行：</p>

<p><code>&quot;.$wpdbprefix.&quot;users as u on u.ID = p.post_author</code></p>

<p>在后面加上：</p>

<p><code>WHERE p.post_status != &#39;attachment&#39;</code></p>

<p>差不多就这些了，在懒懒喵的 <a href="http://blog.nahoya.com/archives/2006_09/129">旧文</a> 中提到的留言关闭问题已经在Textpattern · 4.0.6中得到了解决。 <strong>但是我本人的一个问题，Tag问题还没有搞定，导入会变成Category，我是用的笨办法：直接在WP数据库中先删除它，哈哈！</strong> 还有一个小问题，导入user错误，不过如果是单用户的Blog，大可不必去管这个问题。</p>

<p>*放出修改后的 <del>import_wp.php</del></p>

<p><em>P.S</em> 初次使用 <a href="http://textile.thresholdstate.com/">Textile</a> ，感觉还要适应好段时间，不过用起来确实是种不同的体验。</p>


	<p>
		<div class="bshare-custom icon-medium"><div class="bsPromo bsPromo1"></div><a title="分享到" href="http://www.bShare.cn/" id="bshare-shareto" class="bshare-more">分享到</a><a title="分享到Google+" class="bshare-gplus" href="javascript:void(0);"></a><a title="分享到新浪微博" class="bshare-sinaminiblog" href="javascript:void(0);"></a><a title="分享到微信" class="bshare-weixin" href="javascript:void(0);"></a><a title="分享到Google翻译" class="bshare-gtranslate" href="javascript:void(0);"></a><a title="分享到Delicious" class="bshare-delicious" href="javascript:void(0);"></a><a title="分享到Facebook" class="bshare-facebook" href="javascript:void(0);"></a><a title="分享到Twitter" class="bshare-twitter" href="javascript:void(0);"></a><a title="分享到Tumblr" class="bshare-tumblr" href="javascript:void(0);"></a><a title="分享到豆瓣" class="bshare-douban" href="javascript:void(0);"></a><a title="分享到QQ空间" class="bshare-qzone" href="javascript:void(0);"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a><span class="BSHARE_COUNT bshare-share-count" style="float: none;">29.7K</span></div><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/button.js#style=-1&amp;uuid=f948c694-8e29-4100-989b-423551f07c9f&amp;pophcol=2&amp;lang=zh"></script><a class="bshareDiv" onclick="javascript:return false;"></a><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
	</p>

	<footer>
    <section>
      
        <h1><b>Tag | 标签：</b></h1>
        <ul>
        
        


	 
		<li><a href="/tags.html#Hack-ref">
			Hack <span class="badge">8</span>
		</a></li>
	 
		<li><a href="/tags.html#Textpattern-ref">
			Textpattern <span class="badge">1</span>
		</a></li>
	 
		<li><a href="/tags.html#乱码-ref">
			乱码 <span class="badge">2</span>
		</a></li>
	 
		<li><a href="/tags.html#网站-ref">
			网站 <span class="badge">14</span>
		</a></li>
	
	

        </ul>
      

      
        <h1><b>Cat | 分类：</b></h1>
        <ul>
        
        


	 
		<li><a href="/categories.html#石马 | code-ref">
			石马 | code <span>15</span>
		</a></li>
	
	

        </ul>
      
    </section>
	</footer>

	<div id="disqus_thread"></div>
<script type="text/javascript">

    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'chenjun'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

</article>
<!--$frag-->
        </section>
        <aside>
            <nav>
                <h3>Navigation | 站点导航</h3>
                <ul>
                    <li>
                        <a href="/">Home | 网站首页</a>
                    </li>
                    <li>
                        <a href="/tags.html">Tag List | 标签列表</a>
                    </li>
                    <li>
                        <a href="/categories.html">Categories | 日志分类</a>
                    </li>
                    <li>
                        <a href="/links.html">Site Links | 友情链接</a>
                    </li>
                </ul>
            </nav>
            <ul>
                <li class="search"><form>
  <input type="text" id="st-search-input" class="st-search-input" placeholder="Input then ENTER"/>
</form>
<script type="text/javascript">
var Swiftype = window.Swiftype || {};
  (function() {
    Swiftype.key = '55VDr6bxf6Ng69P1-1gM';
    Swiftype.renderStyle = 'new_page';
    /** CONFIGURATION VARIABLE: YOU MUST EDIT BEFORE ADDING TO YOUR TEMPLATE. **/
    Swiftype.resultPageURL = '/search.html';
    // EXAMPLE:
    // Swiftype.resultPageURL = '/results.html';

    /** DO NOT EDIT BELOW THIS LINE **/
    var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
    script.src = "//s.swiftypecdn.com/embed.js";
    var entry = document.getElementsByTagName('script')[0];
    entry.parentNode.insertBefore(script, entry);
  }());
</script></li>
            </ul>
            <p class="contact">Contact Me @ <a href="/about.html" style="font-weight: bold">About</a> Page!</p>
			<!-- Google Ads Start -->
            <script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
			<!-- chenjun.com 正方形 边栏 -->
            <ins class="adsbygoogle" data-ad-client="ca-pub-4945528698886553" data-ad-slot="1883070208" style="display:inline-block;width:200px;height:200px"></ins> <script>
			(adsbygoogle = window.adsbygoogle || []).push({});
            </script>
			<!-- Google Ads End -->
        </aside>
        <footer class="main">
            <h3>Sponsors | &hearts; 赞助商</h3>
            <p><small><a href="http://jekyllrb.com/">Jekyll</a> & <a href="https://bitbucket.org/">BitBucket</a> & <a href="https://stackedit.io/">StackEdit</a> & <a href="http://ftploy.com/">FTPloy</a> Powerd!</small></p>
        </footer>
    </div>
	<script src="/js/scale.fix.js"></script>
	<script src="/js/jquery.min.js" type="text/javascript"></script>
	<script src="/js/bootstrap.min.js"></script>
	<script src="/fancyBox/jquery.fancybox.pack.js"></script>
	<script src="/js/application.js"></script>
	<script src="/js/go-top.js" type="text/javascript"></script>
	<div style="display:none;"><script src="http://s95.cnzz.com/stat.php?id=17872&web_id=17872" language="JavaScript"></script></div>
</body>
</html>
