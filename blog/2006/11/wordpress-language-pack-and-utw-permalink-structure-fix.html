<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

	<title>解决WP汉化和UTW链接问题 | 陈俊的网：浮生志</title>

    
    <meta name="author" content="Chen Jun(Zhu8)">

  <meta name="google-site-verification" content="Mfl8lf6NN0DWPluv8lQpBL-mrKi22ZOcnlKXYURni1Y" />
  <meta name="baidu-site-verification" content="EfohsDsVrB" />
  <meta property="wb:webmaster" content="e0287cd04d1775d9" />
  <html xmlns:wb=“http://open.weibo.com/wb”>
	<link href="http://feeds.feedburner.com/Zhu8/github/" rel="alternate" title=" Feed" type="application/atom+xml">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="author" href="https://plus.google.com/+ChenJun">

    <link rel="stylesheet" href="http://zhu8.qiniudn.com/assets/css/bootstrap.min.css">
    <!--link rel="stylesheet" href="//cdn.jsdelivr.net/bootflat/2.0.0/css/bootflat.css" /-->
    <link rel="stylesheet" href="http://zhu8.qiniudn.com/assets/css/bootstrap.min.2.css" />
    <!--link rel="stylesheet" href="http://zhu8.qiniudn.com/assets/css/ihover.min.css"-->
    <link rel="stylesheet" href="http://zhu8.qiniudn.com/assets/css/pygment_trac.css">
    <link rel="stylesheet" href="http://zhu8.qiniudn.com/assets/fancyBox/jquery.fancybox.css">
<link rel="stylesheet" href="http://zhu8.qiniudn.com/assets/css/style.css">
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<!--[if lt IE9]>
<script src="http://zhu8.qiniudn.com/assets/js/html5.js"></script>
<![endif]-->
  </head>
  <body>

    <div class="wrapper">
      <header class="main">
        <hgroup>
          <h1 id="logo"><a href="/">陈俊的网：浮生志</a></h1>
          
            <p id="tagline">On The Way to Philistinism...</p>
          
        </hgroup>
        <ul class="buttons">
          <!-- <li><a href="http://github.com/Zhu8/" rel="me">Code <strong>GitHub</strong></a></li> -->
          <li class="twitter"><a href="http://twitter.com/5CJ/" rel="me">Follow <strong>Twitter</strong></a></li>
          <li class="facebook"><a href="http://www.facebook.com/ichenjun/" rel="me">Connect <strong>Facebook</strong></a></li>
          <li class="google"><a href="https://plus.google.com/+ChenJun/" rel="publisher">Plus Me<strong>Google+</strong></a></li>
        </ul>

        <p class="about text-justify">
          <a href="http://chenjun.com/"><strong>陈俊</strong></a>ChenJun(Zhu8)的个人网站，江苏人士，83年生人，电子产品自虐狂，<a href="http://chenjun.com/wang2/"><strong>王小波</strong></a>门下走狗。
        </p>

      </header>

      <section class="main" id="container">
		<!--^frag--><article class="post">
	<header>
    <!-- Nav tabs -->
<ul class="nav nav-pills nav-justifiedx">
    <li class=""><a href="/">Home | 首页</a></li>
	<li class="active"><a href="/blog/">Weblog | 网志</a></li>
	<li class=""><a href="/about.html">About | 关于</a></li>
    <li class=""><a href="/archive.html">Archive | 归档</a></li>
</ul>
	<div class="page-header">
		  <h1>解决WP汉化和UTW链接问题</h1>
    </div>
		<p><b>发布于：</b> <time datetime="2006-11-18T20:17:00+00:00" pubdate>
			2006年11月18日 20时17分00秒</time>
      <a href="https://plus.google.com/+ChenJun?rel=author">Chen Jun(Zhu8)</a>
    </p>
	</header>

	<p>其实严格说来是因为我在<a href="http://www.512j.com/" title="我要安家">我要安家</a>的服务器的关系，所以导致无法使用中文语言包。看下我要安家的配置：</p>

<blockquote>
<p>操作系统 Linux Fedora core 1.0(2.4内核)或Linux Fedora core 2.0(2.6内核);<br>
web服务器 Apache 1.3.31<br>
PHP版本 PHP 4.3.11<br>
Mysql版本 Mysql 4.0.20<br>
Zend支持 支持</p>
</blockquote>

<p>原来都是<strong>PHP版本</strong>搞的鬼，Wordpress默认的是PHP 5的，但是我现在的服务器是4.3.11，因为在*<strong><em>wp-includes/gettext.php</em></strong><em>中</em><em>第105行</em>*有这样一段代码：<br>
<code>php
// $MAGIC1 = (int)0x950412de; //bug in PHP 5.0.2, see https://savannah.nongnu.org/bugs/?func=detailitem&amp;#038;item_id=10565&lt;br /&gt; $MAGIC1 = (int) &amp;#8211; 1794895138;&lt;br /&gt; // $MAGIC2 = (int)0xde120495; //bug&lt;br /&gt; $MAGIC2 = (int) &amp;#8211; 569244523;
</code></p>

<p>其中注释掉的目的是为了修复PHP 5的错误的，因为我的服务器不是PHP 5，所以不需要<strong>注释</strong>掉。相反需要注释掉正在使用的，所以将上面那段代码替换成：<br>
<code>php
 $MAGIC1 = (int)0x950412de; //bug in PHP 5.0.2, see https://savannah.nongnu.org/bugs/?func=detailitem&amp;#038;item_id=10565&lt;br /&gt; // $MAGIC1 = (int) &amp;#8211; 1794895138;&lt;br /&gt; $MAGIC2 = (int)0xde120495; //bug&lt;br /&gt; // $MAGIC2 = (int) &amp;#8211; 569244523;
</code></p>

<p>上面的解决方案是在<a href="http://wordpress.org/support/topic/66818" title="Language set up problem (portuguese) « WordPress Support">WordPress Support</a>找到的。好了，照上面做完一切OK了，现在可以正常使用中文包（zh_CN.mo以及zh_CN.po）了。这里放下本人正在使用的中文包：<a href="http://chenjun.com/blog/upload/zh_CN.rar" title="中文汉化包：zh_CN.mo和zh_CN.po">下载</a>，使用方法如下：</p>

<blockquote>
<p>下载编译好的zh_CN.mo文件(当然你也可以下载zh_CN.po文件然后自行编译)<br>
在Blog的wp-includes目录下建立languages文件夹<br>
将zh<em>CN.mo文件上传到wp-includes/languages文件夹<br>
修改Blog根目录下的wp-config.php文件，将<br>
define (&#8216;WPLANG&#8217;, &#8220;);<br>
修改为<br>
define (&#8216;WPLANG&#8217;, &#8216;zh</em>CN&#8217;);<br>
注意：zh和CN之间是下划线，引号和括号都是英文半角字符。</p>
</blockquote>

<p><em>Updated On 2006/11/20：</em></p>

<p>昨天把WP升级到了2.0.5，结果问题出来了，在先将所有的插件停用再启用的时候，其他的都可以，就是UTW（Ultimate Tag<br>
Warrior）的链接结构（Permalink<br>
Structure）不工作了，搞得我到处搜，去修改.htaccess文件，都不能解决，后来实在没辙了，把WP的链接结果先改成别的，再改回来，就<br>
OK了，虽然昨天我也试过，但是是在UTW还没有重新激活的情况下，将WP的链接结构重新升级了一遍之后才激活的UTW，所以没有起到作用。我的天啊，原<br>
来是这么简单的事情，偏偏我又是不见棺材不掉泪的类型，折腾到最后还是没弄好才回去睡觉的，记下来，以防自己（以及遇到此类问题的朋友）以后再干这种蠢<br>
事。Sigh&#8230;</p>


	<p>
		<div class="addthis_sharing_toolbox">
<ul class="share_links">
  <li>
<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=zhu8"></script>
</li>
</ul>
</div>

	</p>

	<footer>
    <section>
      
        <h1><b>标签：</b></h1>
        <ul>
        
        


	 
		<li><a href="/tags.html#Hack-ref">
			Hack <span class="badge">8</span>
		</a></li>
	 
		<li><a href="/tags.html#UTW-ref">
			UTW <span class="badge">1</span>
		</a></li>
	 
		<li><a href="/tags.html#汉化-ref">
			汉化 <span class="badge">4</span>
		</a></li>
	 
		<li><a href="/tags.html#链接-ref">
			链接 <span class="badge">1</span>
		</a></li>
	
	

        </ul>
      

      
        <h1><b>归档于：</b></h1>
        <ul>
        
        


	 
		<li><a href="/categories.html#石马 | code-ref">
			石马 | code <span>15</span>
		</a></li>
	
	

        </ul>
      
    </section>
	</footer>

	<div id="disqus_thread"></div>
<script type="text/javascript">

    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'chenjun'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

</article>
<!--$frag-->
      </section>

      <aside>
        <nav>
		<h3>Navigation</h3>
          <ul>
      			<li><a href="/">Home</a></li>
				<li><a href="/about.html">About</a></li>
      			<li><a href="/archive.html">Archive</a></li>
      			<li><a href="/tags.html">Tag List</a></li>
      			<li><a href="/categories.html">Categories</a></li>
				<li><a href="/links.html">Site Links</a></li>
          </ul>
        </nav>
        <ul>
          <li class="search"><form>
  <input type="text" id="st-search-input" class="st-search-input" placeholder="Input then ENTER"/>
</form>
<script type="text/javascript">
var Swiftype = window.Swiftype || {};
  (function() {
    Swiftype.key = '55VDr6bxf6Ng69P1-1gM';
    Swiftype.renderStyle = 'new_page';
    /** CONFIGURATION VARIABLE: YOU MUST EDIT BEFORE ADDING TO YOUR TEMPLATE. **/
    Swiftype.resultPageURL = '/search.html';
    // EXAMPLE:
    // Swiftype.resultPageURL = '/results.html';

    /** DO NOT EDIT BELOW THIS LINE **/
    var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
    script.src = "//s.swiftypecdn.com/embed.js";
    var entry = document.getElementsByTagName('script')[0];
    entry.parentNode.insertBefore(script, entry);
  }());
</script></li>
        </ul>

        <h3>Contact</h3>
        <p class="contact">
        MORE @ THE <a href="/about.html"><b>About</b></a> Page!
        </p>
      </aside>
      <footer class="main">
	  <h3>Misc...</h3>
        <p><small>
			<a href="http://jekyllrb.com/">Jekyll</a> & <a href="https://bitbucket.org/">BitBucket</a> & <a href="https://stackedit.io/">StackEdit</a> & <a href="http://ftploy.com/">FTPloy</a> Powered.
		</small></p>
      </footer>
    </div>
    <script src="http://zhu8.qiniudn.com/assets/js/scale.fix.js"></script>
	<script src="http://zhu8.qiniudn.com/assets/js/jquery.min.js" type="text/javascript"></script>
  <script src="http://zhu8.qiniudn.com/assets/js/bootstrap.min.js"></script>
	<script src="http://zhu8.qiniudn.com/assets/fancyBox/jquery.fancybox.pack.js"></script>
	<script src="http://zhu8.qiniudn.com/assets/js/application.js"></script>
	<script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" src="http://zhu8.qiniudn.com/assets/js/go-top.js"></script>

    <div style="display:none;"><script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_17872'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s95.cnzz.com/stat.php%3Fid%3D17872' type='text/javascript'%3E%3C/script%3E"));</script></div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-7529365-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>

