<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh" xml:lang="zh">
  <head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
    
    <meta content="Jekyll" name="generator" />
    <meta content="Chen Jun(Zhu8)" name="author" />
    <meta content="Mfl8lf6NN0DWPluv8lQpBL-mrKi22ZOcnlKXYURni1Y" name="google-site-verification" />
    <meta content="EfohsDsVrB" name="baidu-site-verification" />
    <link href="http://feeds.feedburner.com/Zhu8/" rel="alternate" title=" Feed" type="application/atom+xml" />
    <link href="https://plus.google.com/+ChenJun" rel="author" />
  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      定制Trackback特定样式 &middot; 陈俊的网：浮生志
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/poole.css">
  <link rel="stylesheet" href="/assets/css/syntax.css">
  <link rel="stylesheet" href="/assets/css/lanyon.css">
  <link rel="stylesheet" href="/assets/fancyBox/jquery.fancybox.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>

  <body>
    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p></p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">站点首页 &middot; Home</a>

    <a class="sidebar-nav-item" href="/about.html">关于本站 &middot; About</a>

    <a class="sidebar-nav-item" href="/archive.html">日志归档 &middot; Archive</a>

    <a class="sidebar-nav-item" href="/categories.html">日志分类 &middot; Categories</a>

    <a class="sidebar-nav-item" href="/links.html">友情链接 &middot; Links</a>

    <a class="sidebar-nav-item" href="/search.html">搜索本站 &middot; Search</a>

    <a class="sidebar-nav-item" href="/tags.html">日志标签 &middot; Tags</a>

    <span class="sidebar-nav-item">Currently Ver. 2014.07.31</span>
  </nav>
  <div class="sidebar-item">
    <p>
      &copy; 2014. All rights reserved.
    </p>
	<h3>Sponsors &hearts;</h3>
            <p><small><a href="http://jekyllrb.com/">Jekyll</a> & <a href="https://bitbucket.org/">BitBucket</a> & <a href="https://stackedit.io/">StackEdit</a> & <a href="https://ftploy.com/">FTPloy</a></small></p>
  </div>
</div>

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">陈俊的网：浮生志</a>
            <small>On The Way to Philistinism...</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div id="page-navigation"> 
        <div class="clear">&nbsp;</div> 
        <div class="left"> 
         
                <a href="/blog/2006/12/new-choice-of-search-yodao.html" title="Previous Post: 津津乐道-有道" rel="prev">上一篇日志</a> 
         
        </div> 

        <div class="right"> 
         
                <a href="/blog/2007/01/beggar-garbage-and-tyranny.html" title="Next Post: 乞丐、垃圾以及多数人的暴政" rel="next">下一篇日志</a> 
         
        </div> 
        <div class="clear">&nbsp;</div> 
</div>
<div class="post">
  <h1 class="post-title">定制Trackback特定样式</h1>
  <span class="post-date"><b>发布于：</b> <time datetime="2006-12-23T12:06:50+08:00" pubdate>
			2006年12月23日 12时06分50秒</time>
      <a href="https://plus.google.com/+ChenJun?rel=author">Chen Jun(Zhu8)</a></span>
  <p>首先要自我打击一下，在产生这个想法之后，本来我是<strong>异想天开</strong>地想编成一个插件的，但研究半天发现自己其实对PHP语言还是个大菜鸟，远没有我想的那么简单，只好用笨办法了：手动添加代码到模板中去。</p>

<p>本来想用的来自这里：<a href="http://www.tamba2.org.uk/wordpress/commentstyling/" title="Making Comments stand out">WordPress &#8211; Comment styling</a>，确实是一篇不错的文章，里面不仅介绍了为Trackback和Pingback增加独特样式，也有为特定评论的与众不同的显示提供了解决方案。而且作者Podz所写的<a href="http://www.tamba2.org.uk/wordpress/" title="WordPress Help - Podz @ Tamba2">The Temba2 WordPress Guides</a>是一篇不错的基础教程。评论姑且不谈，我需要的是第一个。</p>

<p>首先是在你的Blog模版的评论页面（一般为<strong>comments.php</strong>）找到这句：</p>
<div class="highlight"><pre><code class="language-" data-lang="">&lt;?php foreach ($comments as $comment) : ?&gt;
</code></pre></div>
<p>在后面加上（<strong>1</strong>）：</p>
<div class="highlight"><pre><code class="language-" data-lang=""> &lt;?php $istback = false; if($comment-&gt;comment_type == &amp;#8221;trackback&amp;#8221;) { $istback = true; } ?&gt;

 &lt;?php $ispingb = false; if($comment-&gt;comment_type == &amp;#8221;pingback&amp;#8221;) { $ispingb = true; } ?&gt;
</code></pre></div>
<p>随后再找到这句：</p>
<div class="highlight"><pre><code class="language-" data-lang="">&lt;?php comment_text() ?&gt;
</code></pre></div>
<p>在前后加上东西之后变成这个样子（<strong>2</strong>）：</p>
<div class="highlight"><pre><code class="language-" data-lang=""> &lt;?php if($istback ) { echo ''
&lt;div class="tbcomment"&gt;&amp;#8221;;} ?&gt;

 &lt;?php if($ispingb ) { echo ''
&lt;div class="pbcomment"&gt;&amp;#8221;;} ?&gt;

 &lt;?php comment_text() ?&gt;

 &lt;?php if($istback ) { echo ''&lt;/div&gt;

  &amp;#8221;;} ?&gt;
 &lt;?php if($ispingb ) { echo ''&lt;/div&gt;

  &lt;p&gt;
    &amp;#8221;;} ?&gt;
</code></pre></div>
<p>当然，为了不那么打击自己而全部照抄，我做了点小小的修改：将（<strong>1</strong>）更改为：</p>
<div class="highlight"><pre><code class="language-" data-lang=""> &lt;?php $istb = false; if(get_comment_type() != "comment") { $istb = true; } ?&gt;
</code></pre></div>
<p>这里就是图个简单，逆向思维，不是comment的当然就是Trackback和Pingback了。后面的（<strong>2</strong>）也就一起简单了。</p>
<div class="highlight"><pre><code class="language-" data-lang=""> &lt;?php if($istb ) { echo ''
&lt;div class="tbcomment"&gt;&amp;#8221;;} ?&gt;

 &lt;?php comment_text() ?&gt;

 &lt;?php if($istb ) { echo ''&lt;/div&gt;

    &lt;p&gt;
      &amp;#8221;;} ?&gt;
</code></pre></div>
<p>最后，在样式表中添加这个CSS样式，就大功告成了：</p>
<div class="highlight"><pre><code class="language-" data-lang="">.tbcomment {
 font:italic 1em/140% Georgia,sans-serif;
 color:gray;
 }
</code></pre></div>
<blockquote>
<p>勉强以此安慰下自己，还能有一小小的创新，不过我并没有彻底的将Comment和Trackback区分开来，单独显示。因为我的TB不算多，所以没有再去弄个插件影响速度，如果你有需要，可以看看这些地方，希望能对你有所帮助：</p>
</blockquote>

<ul>
<li><p><a href="http://mk.netgenes.org/wiki/Trackping_Separator" title="Trackping Separator">Trackping Separator</a></p></li>
<li><p><a href="http://www.noscope.com/journal/2005/01/wp-separating-trackbacks-pingbacks" title="Noscope | Separating Trackbacks &amp;#038; Pingbacks in WordPress 1.5 &amp;#038; Above">Separating Trackbacks &#038; Pingbacks in WordPress 1.5 &#038; Above</a></p></li>
<li><p><a href="http://jackosh.com/wpplugins/trackbacklist/" title="Trackback List Plugin">Trackback List Plugin</a></p></li>
</ul>

</div>
	<div class="pfooter">
      
        <h1><b>Tag | 标签：</b></h1>
        <ul>
        
        


	 
		<li><a href="/tags.html#Hack-ref">
			Hack <span class="badge">8</span>
		</a></li>
	 
		<li><a href="/tags.html#Trackback-ref">
			Trackback <span class="badge">1</span>
		</a></li>
	 
		<li><a href="/tags.html#网站-ref">
			网站 <span class="badge">14</span>
		</a></li>
	
	

        </ul>
      

      
        <h1><b>Cat | 分类：</b></h1>
        <ul>
        
        


	 
		<li><a href="/categories.html#石马 | code-ref">
			石马 | code <span>15</span>
		</a></li>
	
	

        </ul>
      
	</div>
<div class="share">
   <p><div class="bshare-custom icon-medium"><div class="bsPromo bsPromo1"></div>【分享】：<a title="分享到Google+" class="bshare-gplus" href="javascript:void(0);"></a><a title="分享到新浪微博" class="bshare-sinaminiblog" href="javascript:void(0);"></a><a title="分享到微信" class="bshare-weixin" href="javascript:void(0);"></a><a title="分享到Google翻译" class="bshare-gtranslate" href="javascript:void(0);"></a><a title="分享到Delicious" class="bshare-delicious" href="javascript:void(0);"></a><a title="分享到Facebook" class="bshare-facebook" href="javascript:void(0);"></a><a title="分享到Twitter" class="bshare-twitter" href="javascript:void(0);"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a><span class="BSHARE_COUNT bshare-share-count" style="float: none;">29.7K</span></div><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/button.js#style=-1&amp;uuid=f948c694-8e29-4100-989b-423551f07c9f&amp;pophcol=2&amp;lang=zh"></script><a class="bshareDiv" onclick="javascript:return false;"></a><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script></p>
</div>
<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/blog/2014/07/use-bitbucket-and-ftploy-to-private-jekyll.html">使用BitBucket和FTPloy私有Jekyll源码<small>2014年7月27日</small></a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/blog/2014/07/jekyll-github.html">重生@Jekyll+GitHub Pages<small>2014年7月4日</small></a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/blog/2014/06/typecho-personalize.html">Typecho个性化常用代码<small>2014年6月30日</small></a>
        </h3>
      </li>
    
  </ul>
</div>
<div class="disqus">
	<div id="disqus_thread"></div>
<script type="text/javascript">

    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'chenjun'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
		<script src="/assets/js/go-top.js" type="text/javascript"></script>
		<script src="/assets/fancyBox/jquery.fancybox.pack.js" type="text/javascript"></script>
		<script src="/assets/js/scale.fix.js" type="text/javascript"></script>
		<script src="/assets/js/jquery.min.js" type="text/javascript"></script>
	<div style="display:none;"><script src="http://s95.cnzz.com/stat.php?id=17872&web_id=17872" language="JavaScript"></script></div>
  </body>
</html>
