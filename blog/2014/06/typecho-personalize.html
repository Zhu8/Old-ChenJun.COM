<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

	<title>Typecho个性化常用代码 | ChenJun(Zhu8)-浮生志</title>

    
    <meta name="author" content="Chen Jun(Zhu8)">

  <meta name="google-site-verification" content="Mfl8lf6NN0DWPluv8lQpBL-mrKi22ZOcnlKXYURni1Y" />
  <meta name="baidu-site-verification" content="EfohsDsVrB" />
  <meta property="wb:webmaster" content="e0287cd04d1775d9" />
  <html xmlns:wb=“http://open.weibo.com/wb”>
	<link href="http://feeds.feedburner.com/Zhu8/github/" rel="alternate" title=" Feed" type="application/atom+xml">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="author" href="https://plus.google.com/+ChenJun">

    <link rel="stylesheet" href="http://zhu8.qiniudn.com/assets/css/bootstrap.min.css">
    <!--link rel="stylesheet" href="//cdn.jsdelivr.net/bootflat/2.0.0/css/bootflat.css" /-->
    <link rel="stylesheet" href="http://zhu8.qiniudn.com/assets/css/bootstrap.min.2.css" />
    <!--link rel="stylesheet" href="http://zhu8.qiniudn.com/assets/css/ihover.min.css"-->
    <link rel="stylesheet" href="http://zhu8.qiniudn.com/assets/css/pygment_trac.css">
    <link rel="stylesheet" href="http://zhu8.qiniudn.com/assets/fancyBox/jquery.fancybox.css">
<link rel="stylesheet" href="http://zhu8.qiniudn.com/assets/css/style.css" type="text/css" media="screen" charset="utf-8">
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<!--[if lt IE9]>
<script src="http://zhu8.qiniudn.com/assets/js/html5.js"></script>
<![endif]-->
  </head>
  <body>

    <div class="wrapper">
      <header class="main">
        <hgroup>
          <h1 id="logo"><a href="/">ChenJun(Zhu8)-浮生志</a></h1>
          
            <p id="tagline">On The Way to Philistinism...</p>
          
        </hgroup>
        <ul class="buttons">
          <!-- <li><a href="http://github.com/Zhu8/" rel="me">Code <strong>GitHub</strong></a></li> -->
          <li class="twitter"><a href="http://twitter.com/5CJ/" rel="me">Follow <strong>Twitter</strong></a></li>
          <li class="facebook"><a href="http://www.facebook.com/ichenjun/" rel="me">Connect <strong>Facebook</strong></a></li>
          <li class="google"><a href="https://plus.google.com/+ChenJun/" rel="publisher">Plus Me<strong>Google+</strong></a></li>
        </ul>

        <p class="about text-justify">
          <a href="http://chenjun.com/"><strong>陈俊</strong></a>ChenJun(Zhu8)的个人网站，江苏人士，83年生人，电子产品自虐狂，<a href="http://chenjun.com/wang2/"><strong>王小波</strong></a>门下走狗。
        </p>

      </header>

      <section class="main" id="container">
		<!--^frag--><article class="post">
	<header>
    <!-- Nav tabs -->
<ul class="nav nav-pills nav-justifiedx">
    <li class=""><a href="/">Home | 首页</a></li>
	<li class="active"><a href="/blog/">Weblog | 网志</a></li>
	<li class=""><a href="/about.html">About | 关于</a></li>
    <li class=""><a href="/archive.html">Archive | 归档</a></li>
</ul>
	<div class="page-header">
		  <h1>Typecho个性化常用代码</h1>
    </div>
		<p><b>发布于：</b> <time datetime="2014-06-30T12:51:49+00:00" pubdate>
			2014年6月30日 12时51分49秒</time>
      <a href="https://plus.google.com/+ChenJun?rel=author">Chen Jun(Zhu8)</a>
    </p>
	</header>

	<p>发觉自己真的老了，好多东西折腾不动了……一个网站模版和个性化，竟然每天就只能折腾一点点。遥想公瑾当年，一晚上不睡觉，整个网站页面就优化完毕了。</p>

<p>网站<a rel="nofollow" href="http://chenjun.com/oldblog/">以前</a>用<a rel="nofollow" href="http://www.movabletype.com">MT</a>，最喜欢的当然是静态化，虽然用的是3.X，但是能达到我的要求，就一直没有换。但是后来不知道为什么，反垃圾评论功能失效了……作为一个强迫症兼偏执狂，当然受不了这个，但是自己又没劲再去折腾了。于是，换到了<a rel="nofollow" href="http://www.typecho.org">Typecho</a>，因为实在是不想用大众脸的<a rel="nofollow" href="http://wordpress.org">WordPress</a>！</p>

<p>诚如我<a rel="nofollow" href="http://chenjun.com/2014/06/start.html">第一篇日志</a>所言，微博微信都是危险的，他让我们渐渐失去了长时间去思考的能力，适应了快餐文化，适应了随手点个赞。还是回到公开在互联网的个人网志，保存放心、安全，所有东西都归我管。当然，如果不是<a rel="nofollow" href="http://www.blogger.com">Blogger</a>被<strong>土啬女干</strong>了，我是愿意去那里安家的。</p>

<p>好久没有废话了，那废话就说到这里吧，因为Typecho的官方文档还有很多不完善的地方，自己找以及在网上琢磨，为了方便也许只有一两个人能到的这里的友人们，下面就放一些常用的Typecho的代码吧。</p>

<p>这里先放一个<strong><em>列表</em></strong>，详细的请进入<strong>阅读全文</strong>。</p>

<ol>
<li> <a rel="nofollow" href="#1">归档页面模板</a></li>
<li> <a rel="nofollow" href="#2">获取分类描述</a></li>
<li> <a rel="nofollow" href="#3">前后文章调用代码</a></li>
<li> <a rel="nofollow" href="#4">随机颜色标签云</a></li>
<li> <a rel="nofollow" href="#5">返回网页顶部</a></li>
<li> <a rel="nofollow" href="#6">段落首行缩进两字符</a></li>
</ol>

<!--more-->

<h2><a name="1"></a>1、归档页面模板</h2>

<p>（这里涉及到官方文档首段代码没有结尾，注意参考下面的第一段）</p>
<div class="highlight"><pre><code class="language-" data-lang="">&lt;?php
/**
 * 归档页面模板
 *
 * @package custom
 */; ?&gt;

&lt;?php $this-&gt;need('header.php'); ?&gt;

    &lt;div class="col-mb-12 col-8" id="main" role="main"&gt;
        &lt;h3 class="archive-title"&gt;日志归档&lt;/h3&gt;
&lt;?php $this-&gt;widget('Widget_Contents_Post_Recent', 'pageSize=10000')-&gt;to($archives);   
    $year=0; $mon=0; $i=0; $j=0;   
    $output = '&lt;div id="archives"&gt;';   
    while($archives-&gt;next()):   
        $year_tmp = date('Y',$archives-&gt;created);   
        $mon_tmp = date('m',$archives-&gt;created);   
        $y=$year; $m=$mon;   
        if ($mon != $mon_tmp &amp;&amp; $mon &gt; 0) $output .= '&lt;/ul&gt;&lt;/li&gt;';   
        if ($year != $year_tmp &amp;&amp; $year &gt; 0) $output .= '&lt;/ul&gt;';   
        if ($year != $year_tmp) {   
            $year = $year_tmp;   
            $output .= '&lt;h3 class="al_year"&gt;'. $year .' 年&lt;/h3&gt;&lt;ul class="al_mon_list"&gt;'; //输出年份   
        }   
        if ($mon != $mon_tmp) {   
            $mon = $mon_tmp;   
            $output .= '&lt;li&gt;&lt;span class="al_mon"&gt;'. $mon .' 月&lt;/span&gt;&lt;ul class="al_post_list"&gt;'; //输出月份   
        }   
        $output .= '&lt;li&gt;'.date('d日: ',$archives-&gt;created).'&lt;a href="'.$archives-&gt;permalink .'"&gt;'. $archives-&gt;title .'&lt;/a&gt; &lt;em&gt;('. $archives-&gt;commentsNum.')&lt;/em&gt;&lt;/li&gt;'; //输出文章日期和标题   
    endwhile;   
    $output .= '&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;';   
    echo $output;   
?&gt; 
    &lt;/div&gt;&lt;!-- end #main --&gt;

    &lt;?php $this-&gt;need('sidebar.php'); ?&gt;
    &lt;?php $this-&gt;need('footer.php'); ?&gt;
</code></pre></div>
<h2><a name="2"></a>2、获取分类描述</h2>
<div class="highlight"><pre><code class="language-" data-lang="">&lt;?php echo $this-&gt;getDescription(); ?&gt;
</code></pre></div>
<p><em>案例演示：</em></p>
<div class="highlight"><pre><code class="language-" data-lang="">&lt;?php $this-&gt;widget('Widget_Metas_Category_List')
-&gt;parse('&lt;li&gt;&lt;a href="{permalink}" title="{description}"&gt;{name}&lt;/a&gt; ({count})&lt;/li&gt;'); ?&gt;
</code></pre></div>
<h2><a name="3"></a>3、前后文章调用代码</h2>
<div class="highlight"><pre><code class="language-" data-lang="">&lt;?php $this-&gt;thePrev(); ?&gt; &lt;?php $this-&gt;theNext(); ?&gt;
</code></pre></div>
<h2><a name="4"></a>4、随机颜色标签云</h2>
<div class="highlight"><pre><code class="language-" data-lang="">&lt;?php $this-&gt;widget('Widget_Metas_Tag_Cloud', 'ignoreZeroCount=1&amp;limit=30')-&gt;to($tags); ?&gt;
&lt;ul class="tags-list"&gt;
&lt;?php while($tags-&gt;next()): ?&gt;
    &lt;li&gt;&lt;a style="color: rgb(&lt;?php echo(rand(0, 255)); ?&gt;, &lt;?php echo(rand(0,255)); ?&gt;, &lt;?php echo(rand(0, 255)); ?&gt;)" href="&lt;?php $tags-&gt;permalink(); ?&gt;" title='&lt;?php $tags-&gt;name(); ?&gt;'&gt;&lt;?php $tags-&gt;name(); ?&gt;&lt;/a&gt;&lt;/li&gt;
&lt;?php endwhile; ?&gt;
&lt;/ul&gt;
</code></pre></div>
<h2><a name="5"></a>5、返回网页顶部</h2>

<p>在footer.php页面增加如下代码（可直接下载我的第二段JS代码，将其中的图片地址改成你自己定义的）：</p>
<div class="highlight"><pre><code class="language-" data-lang="">&lt;!-- Start of Go-Top Code --&gt;
&lt;script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="http://chenjun.com/usr/uploads/top.js"&gt;&lt;/script&gt;
&lt;!-- End of Go-Top Code --&gt;
</code></pre></div>
<h2><a name="6"></a>6、段落首行缩进两字符</h2>

<p>编辑Style.css文件，增加如下代码：</p>
<div class="highlight"><pre><code class="language-" data-lang="">.post-content p{ 
text-indent: 2em; /*em是相对单位，2em即现在一个字大小的两倍*/ 
} 
</code></pre></div>
<p>后续待补充，部分参考：<a rel="nofollow" href="http://docs.typecho.org">Typecho官方文档</a>以及<a rel="nofollow" href="http://typecho.me">Typecho.me</a>，一并致谢！</p>


	<p>
		<div class="addthis_sharing_toolbox">
<ul class="share_links">
  <li>
<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=zhu8"></script>
</li>
</ul>
</div>

	</p>

	<footer>
    <section>
      
        <h1><b>标签：</b></h1>
        <ul>
        
        


	 
		<li><a href="/tags.html#Typecho-ref">
			Typecho <span class="badge">1</span>
		</a></li>
	 
		<li><a href="/tags.html#代码-ref">
			代码 <span class="badge">1</span>
		</a></li>
	
	

        </ul>
      

      
        <h1><b>归档于：</b></h1>
        <ul>
        
        


	 
		<li><a href="/categories.html#石马 | code-ref">
			石马 | code <span>15</span>
		</a></li>
	
	

        </ul>
      
    </section>
	</footer>

	<div id="disqus_thread"></div>
<script type="text/javascript">

    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'chenjun'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

</article>
<!--$frag-->
      </section>

      <aside>
        <nav>
		<h3>Navigation</h3>
          <ul>
      			<li><a href="/">Home</a></li>
				<li><a href="/about.html">About</a></li>
      			<li><a href="/archive.html">Archive</a></li>
      			<li><a href="/tags.html">Tag List</a></li>
      			<li><a href="/categories.html">Categories</a></li>
				<li><a href="/links.html">Site Links</a></li>
          </ul>
        </nav>
        <ul>
          <li class="search"><script>
  (function() {
    var cx = '011396242115913189926:7a1cte8z8t8';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:searchbox-only resultsUrl="/search.html"></gcse:searchbox-only></li>
        </ul>

        <h3>Contact</h3>
        <p class="contact">
        MORE @ THE <a href="/about.html"><b>About</b></a> Page!
        </p>
      </aside>
      <footer class="main">
	  <h3>Misc...</h3>
        <p><small>
			<a href="http://jekyllrb.com/">Jekyll</a> & <a href="https://bitbucket.org/">BitBucket</a> & <a href="https://stackedit.io/">StackEdit</a> & <a href="http://ftploy.com/">FTPloy</a> Powered.
		</small></p>
      </footer>
    </div>
    <script src="http://zhu8.qiniudn.com/assets/js/scale.fix.js"></script>
	<script src="http://zhu8.qiniudn.com/assets/js/jquery.min.js" type="text/javascript"></script>
  <script src="http://zhu8.qiniudn.com/assets/js/bootstrap.min.js"></script>
	<script src="http://zhu8.qiniudn.com/assets/fancyBox/jquery.fancybox.pack.js"></script>
	<script src="http://zhu8.qiniudn.com/assets/js/application.js"></script>
	<script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" src="http://zhu8.qiniudn.com/assets/js/go-top.js"></script>

    <div style="display:none;"><script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_17872'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s95.cnzz.com/stat.php%3Fid%3D17872' type='text/javascript'%3E%3C/script%3E"));</script></div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-7529365-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>

